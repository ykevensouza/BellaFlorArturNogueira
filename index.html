<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
  <meta name="theme-color" content="#FDF2F8">
  
  <title>BellaFlor Artur Nogueira | Floricultura Boutique</title>
  <meta name="description" content="Arranjos florais exclusivos e presentes em Artur Nogueira. A arte de presentear com eleg√¢ncia." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* --- DESIGN SYSTEM PREMIUM --- */
    :root {
      /* Cores */
      --primary: #BE185D;       /* Rosa Nobre */
      --primary-dark: #831843;  /* Vinho */
      --secondary: #064E3B;     /* Verde Bot√¢nico */
      --gold: #D97706;          /* Ouro suave */
      --bg-body: #FDF4F7;       /* Fundo quase branco rosado */
      --surface: #FFFFFF;
      
      /* Texto */
      --text-main: #1F2937;
      --text-muted: #6B7280;
      
      /* UI Elements */
      --radius-sm: 8px;
      --radius-lg: 24px;
      --shadow-soft: 0 4px 20px rgba(0,0,0,0.03);
      --shadow-hover: 0 15px 35px rgba(190, 24, 93, 0.15);
      
      /* Fontes */
      --font-title: 'Playfair Display', serif;
      --font-body: 'DM Sans', sans-serif;
    }

    /* Reset & Base */
    * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
    html { scroll-behavior: smooth; font-size: 16px; }
    
    body {
      font-family: var(--font-body);
      background-color: var(--bg-body);
      color: var(--text-main);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    h1, h2, h3, h4 { font-family: var(--font-title); color: var(--secondary); font-weight: 700; }
    img { max-width: 100%; display: block; }
    button { cursor: pointer; border: none; background: none; font-family: inherit; transition: all 0.3s ease; }
    a { text-decoration: none; color: inherit; transition: all 0.3s ease; }

    /* Utilities */
    .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }
    .hidden { display: none !important; }
    
    /* Animations */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-up { animation: fadeUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }

    /* --- HEADER (Glassmorphism) --- */
    header {
      position: sticky; top: 0; z-index: 1000;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(255,255,255,0.3);
      padding: 16px 0;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.03);
    }
    
    .nav-content { display: flex; justify-content: space-between; align-items: center; }
    
    .brand { display: flex; align-items: center; gap: 12px; }
    .brand i { font-size: 28px; color: var(--primary); }
    .brand-info { line-height: 1.1; }
    .logo { font-size: 1.5rem; font-weight: 700; letter-spacing: -0.5px; color: var(--secondary); }
    .location { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--primary); font-weight: 600; }

    .btn-header-wa {
      background: #25D366; color: white;
      padding: 10px 24px; border-radius: 50px;
      font-weight: 700; font-size: 0.9rem;
      display: flex; align-items: center; gap: 8px;
      box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
    }
    .btn-header-wa:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4); }
    @media(max-width: 600px) { .btn-header-wa span { display: none; } .btn-header-wa { padding: 10px; border-radius: 50%; width: 40px; height: 40px; justify-content: center; } }

    /* --- HERO SECTION --- */
    .hero {
      position: relative;
      height: 500px;
      display: flex; align-items: center; justify-content: center;
      text-align: center; color: white;
      margin-bottom: 40px;
      /* Imagem de Fundo Premium */
      background: url('https://images.unsplash.com/photo-1479836184084-361950d9c15d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat fixed;
    }
    .hero-overlay {
      position: absolute; inset: 0;
      background: linear-gradient(180deg, rgba(6,78,59,0.3) 0%, rgba(6,78,59,0.7) 100%);
    }
    .hero-content { position: relative; z-index: 2; max-width: 700px; padding: 0 20px; }
    
    .hero h1 { 
      font-size: 3.5rem; margin-bottom: 16px; color: white; 
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    .hero p { font-size: 1.2rem; opacity: 0.95; margin-bottom: 32px; font-weight: 300; }

    /* Search Bar Flutuante */
    .search-box {
      background: white; padding: 8px; border-radius: 50px;
      display: flex; box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      max-width: 500px; margin: 0 auto;
      transition: transform 0.3s;
    }
    .search-box:focus-within { transform: scale(1.02); }
    .search-input { 
      flex: 1; border: none; padding: 12px 20px; font-size: 1rem; 
      border-radius: 50px; color: var(--text-main);
    }
    .search-btn {
      background: var(--primary); color: white;
      width: 48px; height: 48px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem;
    }

    @media(max-width: 768px) { .hero { height: 400px; } .hero h1 { font-size: 2.2rem; } }

    /* --- FILTERS --- */
    .filters-nav {
      position: sticky; top: 74px; z-index: 900;
      padding: 10px 0 20px 0;
      background: linear-gradient(180deg, var(--bg-body) 80%, rgba(253,242,247,0) 100%);
    }
    .chip-container {
      display: flex; gap: 12px; overflow-x: auto; 
      padding-bottom: 5px; scrollbar-width: none;
    }
    .chip-container::-webkit-scrollbar { display: none; }
    
    .chip {
      background: white; border: 1px solid #E5E7EB;
      padding: 10px 24px; border-radius: 50px;
      font-size: 0.95rem; font-weight: 500; color: var(--text-muted);
      white-space: nowrap; transition: all 0.3s;
    }
    .chip:hover { border-color: var(--primary); color: var(--primary); }
    .chip.active {
      background: var(--primary); color: white; border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(190, 24, 93, 0.3);
    }

    /* --- PRODUCT GRID --- */
    .catalog-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 24px; padding-top: 20px;
    }
    .sort-dropdown {
      background: transparent; border: none; font-weight: 700;
      color: var(--secondary); font-size: 0.95rem; cursor: pointer;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 30px; padding-bottom: 80px;
    }

    /* Card Design */
    .card {
      background: var(--surface);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      transition: all 0.4s ease;
      position: relative;
      display: flex; flex-direction: column;
    }
    .card:hover { transform: translateY(-10px); box-shadow: var(--shadow-hover); }

    .card-img-container {
      position: relative; width: 100%; aspect-ratio: 1; overflow: hidden;
      background: #f3f3f3;
    }
    .card-img {
      width: 100%; height: 100%; object-fit: cover;
      transition: transform 0.7s ease;
    }
    .card:hover .card-img { transform: scale(1.1); }

    .card-overlay {
      position: absolute; inset: 0;
      background: rgba(0,0,0,0.2);
      opacity: 0; transition: opacity 0.3s;
      display: flex; align-items: center; justify-content: center;
    }
    .card:hover .card-overlay { opacity: 1; }

    .badge {
      position: absolute; top: 16px; left: 16px;
      background: rgba(255,255,255,0.95);
      padding: 6px 14px; border-radius: 4px;
      font-size: 0.75rem; font-weight: 700; letter-spacing: 0.5px;
      text-transform: uppercase; color: var(--secondary);
      z-index: 2;
    }
    
    .btn-fav {
      position: absolute; top: 16px; right: 16px;
      width: 40px; height: 40px; border-radius: 50%;
      background: white; color: #ccc;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; z-index: 2;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: 0.2s;
    }
    .btn-fav.active { color: #ef4444; }
    .btn-fav:active { transform: scale(0.9); }

    .card-content { padding: 20px; flex: 1; display: flex; flex-direction: column; }
    .card-cat { color: var(--primary); font-size: 0.8rem; font-weight: 700; text-transform: uppercase; margin-bottom: 6px; }
    .card-title { font-size: 1.25rem; margin-bottom: 8px; line-height: 1.3; color: var(--text-main); }
    
    .card-footer { margin-top: auto; display: flex; align-items: center; justify-content: space-between; }
    .card-price { font-size: 1.35rem; font-weight: 700; color: var(--secondary); font-family: var(--font-body); }
    
    .btn-card-action {
      background: var(--text-main); color: white;
      width: 40px; height: 40px; border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      transition: 0.2s; opacity: 0.5;
    }
    .card:hover .btn-card-action { opacity: 1; background: var(--primary); }

    /* --- MODAL --- */
    .modal-backdrop {
      position: fixed; inset: 0; z-index: 2000;
      background: rgba(0,0,0,0.4); backdrop-filter: blur(8px);
      display: flex; align-items: center; justify-content: center;
      opacity: 0; pointer-events: none; transition: 0.4s;
      padding: 20px;
    }
    .modal-backdrop.open { opacity: 1; pointer-events: all; }

    .modal {
      background: white; width: 100%; max-width: 1000px;
      border-radius: var(--radius-lg); overflow: hidden;
      display: grid; grid-template-columns: 1.2fr 1fr;
      box-shadow: 0 25px 50px rgba(0,0,0,0.25);
      transform: translateY(40px); transition: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
    }
    .modal-backdrop.open .modal { transform: translateY(0); }

    .modal-gallery { position: relative; height: 100%; min-height: 400px; background: #f9f9f9; }
    .modal-gallery img { width: 100%; height: 100%; object-fit: cover; }
    
    .modal-info { padding: 48px; position: relative; display: flex; flex-direction: column; justify-content: center; }
    .modal-close {
      position: absolute; top: 20px; right: 20px;
      font-size: 24px; color: var(--text-muted); opacity: 0.7;
    }
    .modal-close:hover { opacity: 1; transform: rotate(90deg); }

    .modal-tag { display: inline-block; background: #FCE7F3; color: var(--primary); padding: 6px 16px; border-radius: 50px; font-weight: 700; font-size: 0.85rem; margin-bottom: 16px; align-self: start; }
    .modal h2 { font-size: 2.5rem; line-height: 1.1; margin-bottom: 16px; }
    .modal-price-lg { font-size: 2rem; color: var(--secondary); font-weight: 700; margin-bottom: 24px; }
    .modal-desc { color: var(--text-muted); font-size: 1.1rem; margin-bottom: 32px; border-left: 3px solid var(--primary); padding-left: 20px; }

    .btn-buy-lg {
      display: inline-flex; justify-content: center; align-items: center; gap: 10px;
      background: linear-gradient(135deg, var(--secondary) 0%, #065F46 100%);
      color: white; width: 100%; padding: 18px; border-radius: 12px;
      font-size: 1.1rem; font-weight: 700; box-shadow: 0 10px 20px rgba(6, 78, 59, 0.2);
    }
    .btn-buy-lg:hover { filter: brightness(1.1); transform: translateY(-2px); }

    @media(max-width: 900px) {
      .modal { grid-template-columns: 1fr; overflow-y: auto; max-height: 90vh; }
      .modal-gallery { height: 300px; }
      .modal-info { padding: 24px; }
      .modal h2 { font-size: 1.8rem; }
    }

    /* --- FOOTER & FLOATING --- */
    footer { background: #18181b; color: white; padding: 60px 0 30px; margin-top: 80px; text-align: center; }
    .social-links { display: flex; justify-content: center; gap: 20px; margin: 24px 0; }
    .social-links a { width: 45px; height: 45px; border-radius: 50%; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
    .social-links a:hover { background: var(--primary); }

    .toast {
      position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px);
      background: #1F2937; color: white; padding: 12px 30px; border-radius: 50px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2); opacity: 0; transition: all 0.4s; z-index: 3000;
      display: flex; align-items: center; gap: 10px; font-weight: 500;
    }
    .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

  </style>
</head>
<body>

  <header>
    <div class="container nav-content">
      <div class="brand">
        <i class="fa-brands fa-pagelines"></i>
        <div class="brand-info">
          <div class="logo">BellaFlor</div>
          <div class="location">Artur Nogueira</div>
        </div>
      </div>
      <a href="#" class="btn-header-wa" onclick="contactGeneral()">
        <i class="fab fa-whatsapp"></i>
        <span>Atendimento</span>
      </a>
    </div>
  </header>

  <section class="hero">
    <div class="hero-overlay"></div>
    <div class="hero-content animate-up">
      <h1>Emo√ß√µes em forma de flores</h1>
      <p>Buqu√™s art√≠sticos, cestas de caf√© e presentes que criam mem√≥rias inesquec√≠veis.</p>
      
      <div class="search-box">
        <input type="text" id="searchInput" class="search-input" placeholder="O que voc√™ procura? (ex: Rosas, Amor...)">
        <button class="search-btn"><i class="fas fa-search"></i></button>
      </div>
    </div>
  </section>

  <main class="container">
    
    <div class="filters-nav animate-up" style="animation-delay: 0.1s;">
      <div class="chip-container" id="filters">
        <button class="chip active" data-cat="all">Todos</button>
        <button class="chip" data-cat="romantico">üíò Rom√¢ntico</button>
        <button class="chip" data-cat="aniversario">üéÇ Anivers√°rio</button>
        <button class="chip" data-cat="cestas">üß∫ Cestas Matinais</button>
        <button class="chip" data-cat="decoracao">üè° Decora√ß√£o</button>
        <button class="chip" data-cat="condolencias">üïäÔ∏è Condol√™ncias</button>
      </div>
    </div>

    <div class="catalog-header animate-up" style="animation-delay: 0.2s;">
      <span style="color:var(--text-muted); font-size: 0.9rem;" id="resultCount">Carregando cole√ß√£o...</span>
      <select id="sortSelect" class="sort-dropdown">
        <option value="featured">‚ú® Em Destaque</option>
        <option value="asc">üí≤ Menor Pre√ßo</option>
        <option value="desc">üíé Maior Pre√ßo</option>
      </select>
    </div>

    <div id="grid" class="grid">
      </div>

  </main>

  <div id="productModal" class="modal-backdrop">
    <div class="modal">
      <div class="modal-gallery">
        <img id="mImg" src="" alt="Detalhe do produto">
      </div>
      <div class="modal-info">
        <button class="modal-close" onclick="closeModal()">&times;</button>
        <span class="modal-tag" id="mCat">Categoria</span>
        <h2 id="mTitle">Nome do Produto</h2>
        <div class="modal-price-lg" id="mPrice">R$ 00,00</div>
        <p class="modal-desc" id="mDesc">Descri√ß√£o detalhada...</p>
        
        <a href="#" id="mBtn" target="_blank" class="btn-buy-lg">
          <i class="fab fa-whatsapp"></i> Comprar Agora
        </a>
        <p style="text-align:center; font-size:0.8rem; margin-top:15px; color:#999">
          <i class="fas fa-lock"></i> Pagamento seguro via Pix ou Cart√£o na entrega
        </p>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"><i class="fas fa-check-circle" style="color:#4ade80"></i> Adicionado aos Favoritos</div>

  <footer>
    <div class="container">
      <h2 style="color:white; font-size: 2rem;">BellaFlor</h2>
      <p style="color:#888; margin-top:10px;">Rua 13 de Maio, Centro - Artur Nogueira, SP</p>
      
      <div class="social-links">
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-pinterest-p"></i></a>
      </div>
      
      <p style="font-size: 0.8rem; color:#555;">&copy; 2024 BellaFlor. Feito com amor.</p>
    </div>
  </footer>

  <script>
    /* --- CONFIGURA√á√ÉO --- */
    const WHATSAPP_NUM = "5519998028205"; // Seu n√∫mero
    
    /* --- DADOS DOS PRODUTOS (Imagens Premium Unsplash) --- */
    const products = [
      {
        id: 1,
        title: "Buqu√™ 12 Rosas Colombianas",
        category: "romantico",
        price: 189.90,
        badge: "Mais Vendido",
        img: "https://images.unsplash.com/photo-1562690868-60bbe7293e94?auto=format&fit=crop&w=800&q=80",
        desc: "A m√°xima express√£o do amor. 12 rosas vermelhas importadas, selecionadas manualmente, envoltas em folhagens nobres e embalagem preta de luxo com la√ßo de cetim."
      },
      {
        id: 2,
        title: "Cesta Amanhecer Premium",
        category: "cestas",
        price: 249.90,
        badge: "Completa",
        img: "https://images.unsplash.com/photo-1590301157890-4810ed352733?auto=format&fit=crop&w=800&q=80",
        desc: "Comece o dia de algu√©m especial com sofistica√ß√£o. Inclui: Suco integral, frutas da esta√ß√£o, p√£es artesanais, geleia importada, frios, drip coffee e um mini arranjo floral."
      },
      {
        id: 3,
        title: "Orqu√≠dea Phalaenopsis Branca",
        category: "decoracao",
        price: 139.90,
        badge: "Dur√°vel",
        img: "https://images.unsplash.com/photo-1566904692482-d856b3e32b00?auto=format&fit=crop&w=800&q=80",
        desc: "A eleg√¢ncia cl√°ssica. Orqu√≠dea de haste dupla plantada em vaso de cer√¢mica vitrificada. S√≠mbolo de pureza e sofistica√ß√£o, ideal para decorar interiores."
      },
      {
        id: 4,
        title: "Box Luxo Girass√≥is",
        category: "aniversario",
        price: 155.00,
        img: "https://images.unsplash.com/photo-1470509037663-253afd7f0f51?auto=format&fit=crop&w=800&q=80",
        desc: "Irradie felicidade! Caixa box cartonada r√≠gida contendo girass√≥is frescos e vibrantes, complementados com tango e gips√≥fila. Perfeito para celebrar a vida."
      },
      {
        id: 5,
        title: "Arranjo Mix do Campo",
        category: "decoracao",
        price: 89.90,
        badge: "Oferta",
        img: "https://images.unsplash.com/photo-1559563362-c667ba5f5480?auto=format&fit=crop&w=800&q=80",
        desc: "Um toque r√∫stico e colorido. Combina√ß√£o alegre de astrom√©lias, g√©rberas e margaridas em vaso de vidro. Traz leveza e cor para qualquer ambiente."
      },
      {
        id: 6,
        title: "Coroa de Condol√™ncias Nobre",
        category: "condolencias",
        price: 320.00,
        img: "https://images.unsplash.com/photo-1595968846059-8386c9629141?auto=format&fit=crop&w=800&q=80",
        desc: "Homenagem solene com flores brancas (l√≠rios, rosas e cris√¢ntemos). Inclui faixa de homenagem personalizada. Entrega priorit√°ria nos cemit√©rios da regi√£o."
      },
      {
        id: 7,
        title: "Kit Vinho & Romance",
        category: "romantico",
        price: 280.00,
        badge: "Present√£o",
        img: "https://images.unsplash.com/photo-1516550893923-42d28e5677af?auto=format&fit=crop&w=800&q=80",
        desc: "Para uma noite inesquec√≠vel. Cont√©m: 1 Vinho Tinto Chileno Reserva, caixa de bombons finos (Ferrero ou Lindt) e um buqu√™ com 6 rosas vermelhas."
      },
      {
        id: 8,
        title: "Terr√°rio Geom√©trico Suculentas",
        category: "decoracao",
        price: 95.00,
        img: "https://images.unsplash.com/photo-1463936575229-46994167ea3b?auto=format&fit=crop&w=800&q=80",
        desc: "Modernidade e natureza. Mini jardim de suculentas e cactos montado em estrutura geom√©trica de vidro e metal. Baixa manuten√ß√£o."
      }
    ];

    /* --- L√ìGICA DO SISTEMA --- */
    let activeFilter = 'all';
    let favorites = JSON.parse(localStorage.getItem('bellaFavs')) || [];

    const formatMoney = (val) => val.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    const getWaLink = (msg) => `https://wa.me/${WHATSAPP_NUM}?text=${encodeURIComponent(msg)}`;

    function renderGrid(list) {
      const grid = document.getElementById('grid');
      const count = document.getElementById('resultCount');
      
      if(list.length === 0) {
        grid.innerHTML = `<div style="grid-column:1/-1; text-align:center; padding:60px; color:#aaa;">
          <i class="fas fa-flower" style="font-size:40px; margin-bottom:10px;"></i><br>
          Nenhum produto encontrado com esses crit√©rios.
        </div>`;
        count.innerText = "0 produtos";
        return;
      }

      count.innerText = `${list.length} produtos encontrados`;
      
      grid.innerHTML = list.map((p, index) => {
        const isFav = favorites.includes(p.id);
        const delay = index * 100;
        
        return `
        <article class="card animate-up" style="animation-delay: ${delay}ms" onclick="openModal(${p.id})">
          <div class="card-img-container">
            ${p.badge ? `<span class="badge">${p.badge}</span>` : ''}
            <button class="btn-fav ${isFav ? 'active' : ''}" onclick="toggleFav(event, ${p.id})">
              <i class="${isFav ? 'fas' : 'far'} fa-heart"></i>
            </button>
            <img src="${p.img}" class="card-img" alt="${p.title}" loading="lazy">
            <div class="card-overlay">
              <span style="background:white; color:var(--text-main); padding:8px 20px; border-radius:50px; font-weight:700; font-size:0.9rem;">Ver Detalhes</span>
            </div>
          </div>
          <div class="card-content">
            <div class="card-cat">${getCategoryName(p.category)}</div>
            <h3 class="card-title">${p.title}</h3>
            <div class="card-footer">
              <span class="card-price">${formatMoney(p.price)}</span>
              <div class="btn-card-action">
                <i class="fas fa-arrow-right"></i>
              </div>
            </div>
          </div>
        </article>
        `;
      }).join('');
    }

    function getCategoryName(slug) {
      const map = {
        'romantico': 'Rom√¢ntico', 'aniversario': 'Anivers√°rio', 
        'cestas': 'Cestas', 'decoracao': 'Decora√ß√£o', 'condolencias': 'Condol√™ncias'
      };
      return map[slug] || slug;
    }

    /* --- FILTRAGEM --- */
    function filterProducts() {
      const term = document.getElementById('searchInput').value.toLowerCase();
      const sort = document.getElementById('sortSelect').value;
      
      let filtered = products.filter(p => {
        const matchCat = activeFilter === 'all' || p.category === activeFilter;
        const matchSearch = p.title.toLowerCase().includes(term);
        return matchCat && matchSearch;
      });

      if(sort === 'asc') filtered.sort((a,b) => a.price - b.price);
      if(sort === 'desc') filtered.sort((a,b) => b.price - a.price);
      // featured mantem a ordem do array original

      renderGrid(filtered);
    }

    // Event Listeners
    document.querySelectorAll('.chip').forEach(btn => {
      btn.addEventListener('click', (e) => {
        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
        e.target.classList.add('active');
        activeFilter = e.target.dataset.cat;
        filterProducts();
      });
    });

    document.getElementById('searchInput').addEventListener('input', filterProducts);
    document.getElementById('sortSelect').addEventListener('change', filterProducts);

    /* --- MODAL --- */
    window.openModal = (id) => {
      const p = products.find(x => x.id === id);
      if(!p) return;

      document.getElementById('mImg').src = p.img;
      document.getElementById('mCat').innerText = getCategoryName(p.category);
      document.getElementById('mTitle').innerText = p.title;
      document.getElementById('mPrice').innerText = formatMoney(p.price);
      document.getElementById('mDesc').innerText = p.desc;
      
      // WhatsApp Message Generator
      const msg = `Ol√°! Gostei do *${p.title}* (${formatMoney(p.price)}) que vi no site. Gostaria de encomendar!`;
      document.getElementById('mBtn').href = getWaLink(msg);

      document.getElementById('productModal').classList.add('open');
      document.body.style.overflow = 'hidden';
    };

    window.closeModal = () => {
      document.getElementById('productModal').classList.remove('open');
      document.body.style.overflow = 'auto';
    };

    // Fechar ao clicar fora
    document.getElementById('productModal').addEventListener('click', (e) => {
      if(e.target === document.getElementById('productModal')) closeModal();
    });

    /* --- FAVORITOS & EXTRAS --- */
    window.toggleFav = (e, id) => {
      e.stopPropagation(); // Evita abrir o modal
      const idx = favorites.indexOf(id);
      
      if(idx > -1) {
        favorites.splice(idx, 1);
      } else {
        favorites.push(id);
        showToast();
      }
      localStorage.setItem('bellaFavs', JSON.stringify(favorites));
      filterProducts(); // Re-render para atualizar icones
    };

    function showToast() {
      const t = document.getElementById('toast');
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2500);
    }

    window.contactGeneral = () => {
      window.open(getWaLink("Ol√°! Gostaria de falar com um atendente da BellaFlor."), '_blank');
    };

    // Init
    renderGrid(products);

  </script>
</body>
</html>